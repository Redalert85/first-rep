======================================================================
KNOWLEDGE BASE EXPANSION TOOL
======================================================================

Parsing mbe_master_guide.md...

✓ Found 46 concepts

Concepts by subject:
  • civil_procedure: 5 concepts
  • constitutional_law: 8 concepts
  • contracts: 11 concepts
  • criminal_law: 7 concepts
  • criminal_procedure: 4 concepts
  • evidence: 5 concepts
  • torts: 6 concepts

======================================================================
GENERATED CODE (copy this into bar_tutor_unified.py)
======================================================================

    def _initialize_torts(self):
        """Initialize torts concepts from master guide"""
        concepts = [
            KnowledgeNode(
                concept_id="torts_intentional_torts",
                name="Intentional Torts",
                subject="torts",
                difficulty=3,
                rule_statement="Battery, assault, false imprisonment, IIED require volitional acts with intent or substantial certainty.",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Transferred intent",
                    "consent scope",
                    "shopkeeper’s privilege limits",
                ]
            ),
            KnowledgeNode(
                concept_id="torts_negligence",
                name="Negligence",
                subject="torts",
                difficulty=3,
                rule_statement="Duty, breach (reasonable person or custom), actual/ proximate cause, damages.",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Duty to unforeseeable plaintiffs (Cardozo vs Andrews)",
                    "res ipsa limits",
                    "superseding vs intervening causes",
                ]
            ),
            KnowledgeNode(
                concept_id="torts_strict_liability_and_products",
                name="Strict Liability & Products",
                subject="torts",
                difficulty=3,
                rule_statement="Strict liability for abnormally dangerous activities, wild animals; product claims under strict, negligence, warranty theories.",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Product misuse vs foreseeable misuse",
                    "learned intermediary (pharma)",
                    "design vs manufacturing defects tests.",
                ]
            ),
            KnowledgeNode(
                concept_id="torts_defamation_and_privacy",
                name="Defamation & Privacy",
                subject="torts",
                difficulty=3,
                rule_statement="False statements harming reputation; public concern triggers constitutional actual-fault requirements.",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Opinions vs fact",
                    "public vs private figures (actual malice vs negligence)",
                    "privacy tort distinctions (intrusion",
                ]
            ),
            KnowledgeNode(
                concept_id="torts_economic_and_dignitary",
                name="Economic & Dignitary",
                subject="torts",
                difficulty=3,
                rule_statement="Intentional interference, fraudulent misrepresentation, malicious prosecution.",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Economic harm requirements",
                    "privilege defenses",
                    "probable cause in malicious prosecution.",
                ]
            ),
            KnowledgeNode(
                concept_id="torts_vicarious_liability_and_damages",
                name="Vicarious Liability & Damages",
                subject="torts",
                difficulty=3,
                rule_statement="Employers liable for employees acting in scope; punitive damages limited; joint & several vs several depending on jurisdiction.",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Frolic vs detour",
                    "independent contractor exceptions",
                    "collateral source rule variations.

#### Visuals",
                ]
            ),
        ]
        for node in concepts:
            self.nodes[node.concept_id] = node


    def _initialize_contracts(self):
        """Initialize contracts concepts from master guide"""
        concepts = [
            KnowledgeNode(
                concept_id="contracts_formation",
                name="Formation",
                subject="contracts",
                difficulty=2,
                rule_statement="See study guide for details",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Advertisements (invitations)",
                    "UCC firm offers",
                    "mailbox rule twists",
                ]
            ),
            KnowledgeNode(
                concept_id="contracts_terms_and_interpretation",
                name="Terms & Interpretation",
                subject="contracts",
                difficulty=3,
                rule_statement="Common law mirror-image; UCC gap fillers; parol evidence.",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Battle of forms",
                    "parol evidence exceptions (ambiguity",
                    "fraud)",
                ]
            ),
            KnowledgeNode(
                concept_id="contracts_performance_and_breach",
                name="Performance & Breach",
                subject="contracts",
                difficulty=3,
                rule_statement="Common law substantial performance vs material breach; UCC perfect tender.",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Anticipatory repudiation (reasonable assurances)",
                    "divisible contracts",
                    "condition precedent vs subsequent.",
                ]
            ),
            KnowledgeNode(
                concept_id="contracts_remedies",
                name="Remedies",
                subject="contracts",
                difficulty=3,
                rule_statement="See study guide for details",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Foreseeability (Hadley)",
                    "mitigation duties",
                    "liquidated damages (reasonable estimate",
                ]
            ),
            KnowledgeNode(
                concept_id="contracts_defenses",
                name="Defenses",
                subject="contracts",
                difficulty=3,
                rule_statement="See study guide for details",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "SOF partial performance exceptions",
                    "mutual mistake vs unilateral",
                    "impossibility vs frustration.",
                ]
            ),
            KnowledgeNode(
                concept_id="contracts_thirdparty_rights",
                name="Third-Party Rights",
                subject="contracts",
                difficulty=3,
                rule_statement="Assignments, delegations, third-party beneficiaries.",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Revocation of gratuitous assignments",
                    "delegation of special skills",
                    "vesting of third-party rights.",
                ]
            ),
            KnowledgeNode(
                concept_id="contracts_ucc_delivery_title_and_risk_of_loss",
                name="UCC Delivery, Title & Risk of Loss",
                subject="contracts",
                difficulty=3,
                rule_statement="See study guide for details",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Breach always keeps risk on breaching party; “FOB plant” is shipment",
                    "not destination; merchant receipt requirement.",
                ]
            ),
            KnowledgeNode(
                concept_id="contracts_acceptance_rejection_and_revocation_ucc",
                name="Acceptance, Rejection & Revocation (UCC)",
                subject="contracts",
                difficulty=3,
                rule_statement="See study guide for details",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Using goods extensively after discovering defect can bar revocation; COD shipments limit inspection rights.",
                ]
            ),
            KnowledgeNode(
                concept_id="contracts_excuse_impossibility_impracticability_frustration",
                name="Excuse: Impossibility, Impracticability, Frustration",
                subject="contracts",
                difficulty=3,
                rule_statement="See study guide for details",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Mere increased cost insufficient unless extreme; assuming price fluctuation risk defeats excuse.",
                ]
            ),
            KnowledgeNode(
                concept_id="contracts_modification_accord_and_satisfaction_novation",
                name="Modification, Accord & Satisfaction, Novation",
                subject="contracts",
                difficulty=3,
                rule_statement="See study guide for details",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Modification of firm offer beyond three months requires fresh consideration; distinguishing novation from assignment/delegation.",
                ]
            ),
            KnowledgeNode(
                concept_id="contracts_warranties_ucc_and_common",
                name="Warranties (UCC & Common)",
                subject="contracts",
                difficulty=3,
                rule_statement="See study guide for details",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Statements of opinion/puffery not express warranties; “as is” doesn’t negate express warranties; limitations failing essential purpose open door to full UCC remedies.",
                ]
            ),
        ]
        for node in concepts:
            self.nodes[node.concept_id] = node


    def _initialize_criminal_law(self):
        """Initialize criminal_law concepts from master guide"""
        concepts = [
            KnowledgeNode(
                concept_id="criminal_law_elements_of_crimes",
                name="Elements of Crimes",
                subject="criminal_law",
                difficulty=2,
                rule_statement="Every offense needs a voluntary act (or qualifying omission), the requisite mental state, concurrence, and causation.",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Specific vs general intent (intoxication defenses)",
                    "transferred intent limited to same crime",
                    "medical negligence generally foreseeable",
                ]
            ),
            KnowledgeNode(
                concept_id="criminal_law_homicide_offenses",
                name="Homicide Offenses",
                subject="criminal_law",
                difficulty=3,
                rule_statement="Murder = unlawful killing with malice aforethought (intent to kill, intent to seriously injure, depraved heart, felony murder). Manslaughter lacks mal",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Instant premeditation allowed; deadly weapon inference; felony-murder merger; cooling-off defeats voluntary manslaughter; police/victim killings not felony murder (agency theory).",
                ]
            ),
            KnowledgeNode(
                concept_id="criminal_law_other_crimes_against_persons",
                name="Other Crimes Against Persons",
                subject="criminal_law",
                difficulty=3,
                rule_statement="See study guide for details",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Battery requires only intent to touch; assault has two theories; kidnapping needs substantial movement; mistake of age no defense to statutory rape.",
                ]
            ),
            KnowledgeNode(
                concept_id="criminal_law_property_crimes",
                name="Property Crimes",
                subject="criminal_law",
                difficulty=3,
                rule_statement="See study guide for details",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Intent at time of taking (larceny); assaultive felonies merge; force must accompany taking for robbery; burglary intent must pre-exist entry.",
                ]
            ),
            KnowledgeNode(
                concept_id="criminal_law_inchoate_crimes",
                name="Inchoate Crimes",
                subject="criminal_law",
                difficulty=3,
                rule_statement="See study guide for details",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Solicitation complete without acceptance; conspiracy survives completed offense; attempt always specific intent; abandonment defense limited (MPC).",
                ]
            ),
            KnowledgeNode(
                concept_id="criminal_law_accomplice_and_accessory_liability",
                name="Accomplice & Accessory Liability",
                subject="criminal_law",
                difficulty=3,
                rule_statement="See study guide for details",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Mere presence insufficient; dual intent requirement; accomplice liability remains even if principal acquitted; accessory after fact not liable for underlying offense.",
                ]
            ),
            KnowledgeNode(
                concept_id="criminal_law_defenses",
                name="Defenses",
                subject="criminal_law",
                difficulty=3,
                rule_statement="See study guide for details",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Duress unavailable for murder; voluntary intoxication limited; entrapment fails if predisposed; mistaking age no defense to statutory rape.",
                ]
            ),
        ]
        for node in concepts:
            self.nodes[node.concept_id] = node


    def _initialize_criminal_procedure(self):
        """Initialize criminal_procedure concepts from master guide"""
        concepts = [
            KnowledgeNode(
                concept_id="criminal_procedure_fourth_amendment",
                name="Fourth Amendment",
                subject="criminal_procedure",
                difficulty=3,
                rule_statement="See study guide for details",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Standing (expectation of privacy)",
                    "private search doctrine",
                    "warrant particularity",
                ]
            ),
            KnowledgeNode(
                concept_id="criminal_procedure_exclusionary_rule",
                name="Exclusionary Rule",
                subject="criminal_procedure",
                difficulty=3,
                rule_statement="See study guide for details",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Impeachment use",
                    "Miranda violations (non-Miranda statements may be used for impeachment)",
                    "attenuation factors.",
                ]
            ),
            KnowledgeNode(
                concept_id="criminal_procedure_fifth_amendment",
                name="Fifth Amendment",
                subject="criminal_procedure",
                difficulty=3,
                rule_statement="See study guide for details",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Ambiguous requests",
                    "re-initiation by suspect",
                    "public-safety exception",
                ]
            ),
            KnowledgeNode(
                concept_id="criminal_procedure_sixth_amendment",
                name="Sixth Amendment",
                subject="criminal_procedure",
                difficulty=3,
                rule_statement="See study guide for details",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Offense-specific attachment",
                    "deliberate elicitation",
                    "Massiah",
                ]
            ),
        ]
        for node in concepts:
            self.nodes[node.concept_id] = node


    def _initialize_civil_procedure(self):
        """Initialize civil_procedure concepts from master guide"""
        concepts = [
            KnowledgeNode(
                concept_id="civil_procedure_jurisdiction_and_venue",
                name="Jurisdiction & Venue",
                subject="civil_procedure",
                difficulty=4,
                rule_statement="See study guide for details",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "General vs specific jurisdiction",
                    "minimum contacts",
                    "domicile",
                ]
            ),
            KnowledgeNode(
                concept_id="civil_procedure_pleadings_and_motions",
                name="Pleadings & Motions",
                subject="civil_procedure",
                difficulty=3,
                rule_statement="See study guide for details",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Twiqbal plausibility",
                    "relation back",
                    "waiver of defenses.",
                ]
            ),
            KnowledgeNode(
                concept_id="civil_procedure_joinder_and_discovery",
                name="Joinder & Discovery",
                subject="civil_procedure",
                difficulty=3,
                rule_statement="See study guide for details",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Compulsory counterclaims",
                    "indispensable parties",
                    "discovery sanctions.",
                ]
            ),
            KnowledgeNode(
                concept_id="civil_procedure_pretrial_and_trial",
                name="Pretrial & Trial",
                subject="civil_procedure",
                difficulty=3,
                rule_statement="See study guide for details",
                elements=[],
                policy_rationales=[],
                common_traps=[]
            ),
            KnowledgeNode(
                concept_id="civil_procedure_judgments_and_preclusion",
                name="Judgments & Preclusion",
                subject="civil_procedure",
                difficulty=3,
                rule_statement="See study guide for details",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Same parties/privity",
                    "mutual vs non-mutual collateral estoppel",
                    "full faith and credit.

#### Visuals",
                ]
            ),
        ]
        for node in concepts:
            self.nodes[node.concept_id] = node


    def _initialize_evidence(self):
        """Initialize evidence concepts from master guide"""
        concepts = [
            KnowledgeNode(
                concept_id="evidence_relevance",
                name="Relevance",
                subject="evidence",
                difficulty=3,
                rule_statement="See study guide for details",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Subsequent remedial measures",
                    "settlements",
                    "offers to pay medical expenses",
                ]
            ),
            KnowledgeNode(
                concept_id="evidence_character_evidence",
                name="Character Evidence",
                subject="evidence",
                difficulty=3,
                rule_statement="See study guide for details",
                elements=[],
                policy_rationales=[],
                common_traps=[]
            ),
            KnowledgeNode(
                concept_id="evidence_hearsay",
                name="Hearsay",
                subject="evidence",
                difficulty=4,
                rule_statement="See study guide for details",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Double hearsay",
                    "testimonial statements confronting (Crawford)",
                    "former testimony requirements.",
                ]
            ),
            KnowledgeNode(
                concept_id="evidence_witnesses_and_impeachment",
                name="Witnesses & Impeachment",
                subject="evidence",
                difficulty=3,
                rule_statement="See study guide for details",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Collateral matters",
                    "prior consistent vs inconsistent statements",
                    "confrontation Clause for testimonial hearsay.",
                ]
            ),
            KnowledgeNode(
                concept_id="evidence_privileges_and_policy",
                name="Privileges & Policy",
                subject="evidence",
                difficulty=3,
                rule_statement="See study guide for details",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Spousal privileges scope",
                    "waiver by presence of third parties",
                    "work-product doctrine.

#### Visuals",
                ]
            ),
        ]
        for node in concepts:
            self.nodes[node.concept_id] = node


    def _initialize_constitutional_law(self):
        """Initialize constitutional_law concepts from master guide"""
        concepts = [
            KnowledgeNode(
                concept_id="constitutional_law_judicial_power_and_justiciability",
                name="Judicial Power & Justiciability",
                subject="constitutional_law",
                difficulty=3,
                rule_statement="Case-or-controversy requirement demands standing (injury, causation, redressability), ripeness, and absence of mootness or political questions.",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Taxpayer standing (usually none)",
                    "generalized grievances",
                    "mootness exceptions (e.g.",
                ]
            ),
            KnowledgeNode(
                concept_id="constitutional_law_federal_legislative_power",
                name="Federal Legislative Power",
                subject="constitutional_law",
                difficulty=4,
                rule_statement="Congress operates within enumerated powers; Commerce Clause covers channels, instrumentalities, and substantial economic effects; Necessary & Proper c",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Intrastate non-economic activity (Lopez)",
                    "attenuated chains under substantial-effects theory",
                    "anti-commandeering (New York v. US)",
                ]
            ),
            KnowledgeNode(
                concept_id="constitutional_law_executive_power",
                name="Executive Power",
                subject="constitutional_law",
                difficulty=3,
                rule_statement="Presidential power peaks with congressional authorization, declines in twilight zones, bottomed out when defying Congress.",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Executive agreements = binding without Senate",
                    "removal limits for independent agencies",
                    "pardon excludes impeachment",
                ]
            ),
            KnowledgeNode(
                concept_id="constitutional_law_federalism_and_state_power",
                name="Federalism & State Power",
                subject="constitutional_law",
                difficulty=3,
                rule_statement="Tenth Amendment reserves unenumerated powers; Supremacy Clause preempts conflicts; dormant Commerce Clause prevents discriminatory burdens; states can",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Facial neutrality with discriminatory effect",
                    "Article IV Privileges & Immunities limited to citizens",
                    "federal commandeering of states",
                ]
            ),
            KnowledgeNode(
                concept_id="constitutional_law_individual_rights",
                name="Individual Rights",
                subject="constitutional_law",
                difficulty=3,
                rule_statement="Procedural DP requires notice + hearing for life/liberty/property; substantive DP protects fundamental rights via strict scrutiny, otherwise rational ",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "At-will employment lacks property interest",
                    "stigma-plus requirement",
                    "emergency exceptions for hearings",
                ]
            ),
            KnowledgeNode(
                concept_id="constitutional_law_equal_protection",
                name="Equal Protection",
                subject="constitutional_law",
                difficulty=3,
                rule_statement="Classification triggers scrutiny: suspect (strict), quasi-suspect (intermediate), others (rational basis); fundamental rights also trigger strict scru",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Need discriminatory intent",
                    "federal alienage uses rational basis",
                    "affirmative action strict scrutiny",
                ]
            ),
            KnowledgeNode(
                concept_id="constitutional_law_first_amendment",
                name="First Amendment",
                subject="constitutional_law",
                difficulty=3,
                rule_statement="Content-based regulations = strict scrutiny; content-neutral TPM = intermediate; unprotected categories include incitement, obscenity, fighting words,",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Incitement requires imminence",
                    "fighting words must be face-to-face",
                    "prior restraint presumption",
                ]
            ),
            KnowledgeNode(
                concept_id="constitutional_law_first_amendment",
                name="First Amendment",
                subject="constitutional_law",
                difficulty=3,
                rule_statement="Establishment Clause prohibits endorsement/coercion; Free Exercise absolutely protects belief, protects conduct when laws target religion.",
                elements=[],
                policy_rationales=[],
                common_traps=[
                    "Smith (neutral laws need no exemptions)",
                    "school prayer always problematic",
                    "aid to religious schools permissible if neutral",
                ]
            ),
        ]
        for node in concepts:
            self.nodes[node.concept_id] = node



======================================================================
NEXT STEPS:
======================================================================
1. Copy the generated code above
2. Open bar_tutor_unified.py in an editor
3. Find and replace the _initialize_<subject> methods
4. Save the file
5. Test: python3 test_tutor.py
6. Run: python3 bar_tutor_unified.py
